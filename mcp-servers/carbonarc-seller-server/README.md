# CarbonArc Seller MCP Server

This MCP Server has four tools -

1. create-account-and-login: Having an account with CarbonArc is mandatory to access its tools. This tool creates account for current buyer agent using the KYA token generated by Skyfire and an agent generated new secure regex password that must contain minimum of 8,  maximum of 12 alphanumeric characters including atleast 1 uppercase character, 1 numeric character and 1 special character. On successful account creation, access token is returned.
2. search-dataset: Access token is mandatory to access this tool. This tool returns the list of datasets matching the input prompt. Each dataset has dataset_id which could be further used in other tools.
3. get-pricing: Access token is mandatory to access this tool. This tool gets pricing for the dataset_id provided.
4. download-dataset: Access token is mandatory to access this tool. Payment should. already be executed and JWT PAY token generated by Skyfire is required. This tool returns the dataset url for the selected dataset_id.

## Getting Started

- Set up an Ory account: 
Ory is the default CIAM being used in this demo. Take a look at our [partnership with Ory](https://www.ory.sh/blog/enabling-the-agentic-economy-with-ory-and-skyfire) integrating KYAPay with CIAMs to secure the CarbonArc MCP server (the seller of the data).
[Blog](https://www.ory.sh/blog/agentic-ai-security-mcp-oauth) to refer for more details on Ory + MCP integration.

Steps to be followed for setting up Ory:
1. Visit the [Ory Console](https://console.ory.sh)
2. Create a new workspace
3. Create a project in the new workspace
4. Use the Project ID, Project Slug, API endpoints etc details from Project Settings tab in env variables.

## Installation

1.  Install dependencies:
    ```bash
    npm install
    ```
2. Follow the [Skyfire Platform Setup Guide](https://docs.skyfire.xyz/docs/introduction) to create seller account and seller services.
3. Git clone Ory MCP repo from [here](https://github.com/ory/mcp) and use npm link to tie [mcp-access-control](https://github.com/ory/mcp/tree/main/packages/mcp-access-control) package with this server. This will be a npm package in a few days.
4. Set up environment variables:
    Create a `.dev.vars` file in the root directory. You can copy `.dev.vars.example` if one exists, or add the necessary variables manually.

    ```
    # .dev.vars
    CARBONARC_SELLER_SERVICE_ID=your_seller_service_id
    JWKS_URL=https://api.skyfire.xyz/.well-known/jwks.json
    ORY_API_KEY=your_ory_api_key
    ORY_PROJECT_ID=your_ory_project_slug
    SKYFIRE_API_KEY=your_carbonarc_seller_api_key
    JWT_ISSUER=https://app.skyfire.xyz
    SKYFIRE_API_BASE_URL=https://api.skyfire.xyz
    ```

## Run the development server:

```bash
npm run dev
```

The MCP server will run on [http://localhost:8789/sse](http://localhost:8789/sse).
